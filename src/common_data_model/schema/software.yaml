id: https://w3id.org/altium/cdm/software/
name: cdm-procurement
prefixes:
  linkml: https://w3id.org/linkml/
  core: https://w3id.org/altium/cdm/core/
  sft: https://w3id.org/altium/cdm/software/

imports:
  - linkml:types

default_range: string
default_prefix: sft

subsets:
  software:
    description: >- 
      TBD
    annotations:
      style: "fill:#3c78d8"

classes:

  sft_software_project:
    is_a: Activity
    in_subset: software
    class_uri: sft:SoftwareProject
    title: Software Project
    description: TBD
    annotations:
      grid: grid:workspace:{workspace-id}:software:software-project/{id}
      platformAPI: SftSoftwareProject
    mixins:
      - SolutionItem
    slots:
      - core_releases      
      - sft_software_project_ai_models
      - sft_software_project_device_configuration
      - sft_software_project_latest_build_artifacts
    slot_usage:
      core_releases:
        range: sft_software_release

  sft_software_release:
    is_a: Artifact
    in_subset: software
    class_uri: sft:SoftwareRelease
    title: Software Release
    description: TBD
    annotations:
      grid: grid:workspace:{workspace-id}:software:software-release/{id}
    slots:
      - sft_software_release_ai_models
      - sft_software_release_build_artifacts
    attributes:
      title:
        description: Title of the release
      description:
        description: Free form text with additional details about the release. Changelog, etc.
      attachments:
        description: Additional files associated with the release (reports, documents, etc.)
        range: BLOB

  sft_device_configuration:
    is_a: Artifact
    in_subset: software
    class_uri: sft:DeviceConfiguration
    title: Device Configuration
    description: TBD
    annotations:
      grid: grid:workspace:{workspace-id}:software:device-configuration/{id}
      platformAPI: SftDevCfgDeviceConfiguration
    slots:
      - core_revisions
    slot_usage:
      core_revisions:
        range: sft_device_configuration_revision

  sft_device_configuration_revision:
    is_a: Artifact
    in_subset: software
    class_uri: sft:DeviceConfigurationRevision
    title: Device Configuration Revision
    description: TBD
    annotations:
      grid: grid:workspace:{workspace-id}:software:device-configuration-revision/{id}
      platformAPI: SftDevCfgDeviceConfigurationRevision
    attributes:
      sft_DeviceConfigurationRevision_pinModel:
        alias: pinModel
        title: pin model
        description: TBD
        range: sft_PinAssignmentModel
        required: true
        inlined: true

  sft_PinAssignmentModel:
    is_a: Resource
    in_subset: software
    class_uri: sft:PinAssingmentModel
    title: Device pin assgnment
    description: TBD
    attributes:
      sft_PinAssignmentModel_pins:
        alias: pins
        title: pins
        description: TBD
        range: sft_PinAssignment
        required: true
        multivalued: true
        inlined: true
        inlined_as_list: true

  sft_PinAssignment:
    is_a: Resource
    in_subset: software
    class_uri: sft:PinAssingment
    title: Device pin assgnment
    description: TBD
    attributes:
      sft_PinAssignment_pinNumber:
        alias: pinNumber
        title: pin number
        description: TBD
        range: integer
        required: true
      sft_PinAssignment_pinName:
        alias: pinName
        title: pin name
        description: TBD
        range: string
        required: true
      sft_PinAssignment_pinFunction:
        alias: pinFunction
        title: pin function
        description: TBD
        range: string
        required: true
      sft_PinAssignment_symbolicName:
        alias: symbolicName
        title: symbolic name
        description: TBD
        range: string
        required: true

  sft_ai_model:
    is_a: Artifact
    in_subset: software
    class_uri: sft:AIModel
    title: AI Model
    description: AI model artifact in context of a workspace
    comments:
      - We start with a simple Artifact-like entity without explicit revisions support.
        The assumption is that if we need revisions going forward, we'll add explicit revision entity,
        define GRID for it, relations, etc.
    todos:
      - Data Content Platform would likely define another (but related) AI model entity - the one
        that is going to be part of Solution Template. The exact name / definition of the entity is TBD.
    annotations:
      grid: grid:workspace:{workspace-id}:software:ai-model/{id}
      maturity: EXPERIMENTAL
    mixins:
      - SolutionItem

  sft_build_artifact:
    is_a: Artifact
    in_subset: software
    class_uri: sft:BuildArtifact
    title: Build Artifact
    description: TBD

  sft_software_bom:
    is_a: Resource
    in_subset: software
    class_uri: sft:SoftwareBom
    title: Software BOM
    annotations:
      platformAPI: SftSoftwareBom
    description: >-
      A Software Bill of Materials (SBOM) is a formal record containing the details 
      of drivers, middlewares, and application libraries used in the embedded system.
      in building software.
    attributes:
        sft_SoftwareBom_components:
            title: components
            description: The list of software components included in the SBOM.
            range: sft_software_component
            multivalued: true
            required: true

  sft_software_component:
    is_a: Resource
    in_subset: software
    class_uri: sft:SoftwareComponent
    title: Software Component
    annotations:
      platformAPI: SftSoftwareComponent
    description: >-
      A Software Component represents a single component in a Software Bill of Materials (SBOM).
      It includes details such as the component's name, version, and dependencies.
    slots:
      - core_localId
      - core_name
    attributes:
      sft_SoftwareComponent_version:
        title:  version
        description: Version of the software component
        required: false
      sft_SoftwareComponent_vendor:
        title: vendor
        description: Vendor of the software component
        required: false
      sft_SoftwareComponent_dependencies:
        title: dependencies
        description: The components that this component depends on.
        range: sft_software_component
        multivalued: true
        required: false

slots: 

  sft_software_project_device_configuration:
    is_a: core_hasOutput
    slot_uri: sft:SoftwareProject_deviceConfiguration
    title: device_configuration
    description: Device Configuration derived from the project
    range: sft_device_configuration

  sft_software_project_latest_build_artifacts:
    is_a: core_hasOutput
    title: latest_build_artifact
    description: Latest build artifacts produced from the project
    range: sft_build_artifact
    multivalued: true

  sft_software_project_ai_models:
    is_a: core_hasInput
    title: ai_models
    description: TBD
    range: sft_ai_model

  sft_software_release_ai_models:
    is_a: core_hasPart
    title: ai_models
    description: AI model artifacts included into the release.
    range: sft_ai_model

  sft_software_release_build_artifacts:
    is_a: core_hasPart
    title: build_artifacts
    description: Firmware build artifacts, deployable to the device. May be multiple artifacts if firmware targets multiple chips.
    range:  sft_build_artifact
    multivalued: true
